<div class="min-h-screen bg-white">
  <!-- Search -->
  <!-- <div class="max-w-7xl mx-auto p-4">
    <div class="flex items-center border-b border-gray-300">
      <input type="text" placeholder="Pants" class="flex-1 py-2 px-2 outline-none text-gray-700 placeholder-gray-400" />
      <button class="text-gray-500">âœ•</button>
    </div>
  </div> -->

  <!-- Main layout -->
  <div class="px-10 mx-auto p-4 grid grid-cols-12  gap-6">
    <aside class="col-span-12 md:col-span-3 space-y-6 bg-white shadow-md py-8 px-4 rounded-lg" style="height: fit-content;">
      <h2 class="text-lg font-semibold mb-4">Filter Products</h2>

      <!-- Keyword -->
      <div class="mb-4">
        <label class="block text-sm font-medium mb-1">Keyword</label>
        <input type="text" name="keyword" placeholder="Search..." (input)="searchProducts($event)"
          class="w-full border border-gray-300 rounded-md p-2 text-sm">
      </div>

      <!-- Price Range -->
      <div class="mb-4">
        <label class="block text-sm font-medium mb-1">Price Range</label>
        <div class="flex space-x-2">
          <input type="number" name="price[gte]" placeholder="Less than" [(ngModel)]="minPrice"
            class="w-1/2 border border-gray-300 rounded-md p-2 text-sm">
          <input type="number" name="price[lte]" placeholder="Greater than" [(ngModel)]="maxPrice"
            class="w-1/2 border border-gray-300 rounded-md p-2 text-sm">
        </div>
      </div>

      <!-- Sort -->
      <div class="mb-4">
        <label class="block text-sm font-medium mb-1">Sort By</label>
        <select name="sort" class="w-full border border-gray-300 rounded-md p-2 text-sm" [(ngModel)]="sortProducts">
          <option value="">Price (Low to High)</option>
          <option value="-price">Price (High to Low)</option>
        </select>
      </div>

      <!-- Brand -->
      <div class="mb-4">
        <label class="block text-sm font-medium mb-1">Brand</label>
        <select name="brand" class="w-full border border-gray-300 rounded-md p-2 text-sm" [(ngModel)]="selectedBrand">
          <option value="">Select Brand</option>
          @for (brand of allBrands; track $index) {
             <option [value]="brand._id">{{brand.name}}</option>
          }
        </select>
      </div>

      <!-- Category -->
      <div class="mb-4">
        <label class="block text-sm font-medium mb-1">Category</label>
        <select name="Category" class="w-full border border-gray-300 rounded-md p-2 text-sm" [(ngModel)]="selectedCategory">
          <option value="">Select Category</option>
          @for (category of allCategories; track $index) {
             <option [value]="category._id">{{category.name}}</option>
          }
        </select>
      </div>

      <!-- Submit -->
      <button class="w-full bg-secondary text-white py-2 px-4 mt-4 rounded-md hover:bg-red-700 hover:cursor-pointer" (click)="applyFilters()">
        Apply Filters
      </button>
    </aside>


    <!-- Products -->
    <div class="py-3 col-span-12 md:col-span-9 gap-6 mb-10">
      <main>
        <!--class="lg:col-span-3"-->
        <!-- Items count -->
        @if (isLoading) {
        <app-loader></app-loader>

        } @else if (productsList.length > 0) {
        <!-- Grid -->
        <div class="grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-4">
          @for (product of productsList | paginate: {
                  id: 'products',
                  itemsPerPage: pageSize,
                  currentPage: currentPage,
                  totalItems: total
                }; track product.id) {
            <app-product-card [item]="product" />
          }
        </div>
        }@else {
           <section class="min-h-screen flex flex-col justify-center items-center py-10 text-center text-gray-600">
            <i class="fa-solid fa-hourglass text-4xl mb-4"></i>
            <p class="text-lg font-medium">No Products Found</p>
          </section>
        }

        <pagination-controls class="my-pagination" id="products"  previousLabel=""  nextLabel="" (pageChange)="pageChanged($event)"></pagination-controls>

      </main>
    </div>
  </div>
</div>
